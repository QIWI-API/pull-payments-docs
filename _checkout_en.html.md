# Checkout {#checkout_en}

###### Last update: 2017-07-11 | [Edit on GitHub](https://github.com/QIWI-API/pull-payments-docs/blob/master/_checkout_en.html.md)

Using Pull REST API, merchant may also offer a Visa QIWI Wallet user to pay the invoice immediately by redirecting to the Visa QIWI Wallet Сheckout page. 

To redirect, HTTP GET-request is used to the following URL:

`https://bill.qiwi.com/order/external/main.action`

Server opens invoice checkout page. Page contains a number of ways to pay the invoice.



## GET Parameters

Parameter|Type|Description|Required
---------|--------|---|------
shop| string |Merchant’s ID in Visa QIWI Wallet system, corresponds to `{prv\_id}` parameter used to create the bill.|Y
transaction| string |Invoice ID generated by the merchant, corresponds to `{bill\_id}` parameter used to create the bill.|Y
iframe| boolean | This parameter (if `true`) means that invoice page would be opened in "iframe". The checkout page appears more compact and can be embedded conveniently within the merchant’s site. Default value is `false`|N
successUrl |URL-encoded string| The URL to which the payer will be redirected in case of successful creation of Visa QIWI Wallet transaction. URL must be within merchant's site | N 
failUrl |URL-encoded string | The URL to which the payer will be redirected when creation of Visa QIWI Wallet transaction is unsuccessful. URL must be within merchant's site |N
target |string|"iframe" or empty. This parameter means that hyperlink specified in `successUrl` / `failUrl` parameter opens in "iframe" page|N
pay_source |string| Accepts `mobile`, `qw`, `card`, `wm`, `ssk`. Default payment method to show first for the client. Allowed values:<br> `qw` – Visa QIWI Wallet account;<br> `mobile` – client’s cell phone account;<br> `card` – a credit/debit card;<br> `wm` – linked WebMoney wallet;<br> `ssk` – payment by cash in a QIWI Terminal.<br> When specified method is inaccessible for the Customer, the page contains notice about it and the client can choose another method.|N

## Redirection to Merchan't Site

Checkout page may redirect Customer back to URL specified in `successUrl` or `failUrl` parameter (if any) when the Customer completes payment process.

<aside class="notice">
Redirection occurs when the user pays by Visa QIWI Wallet account balance only.
</aside>

<aside class="warning">
When redirection to <i>successUrl</i> or <i>failUrl</i> is not completed by some reason, you should wait for the Visa QIWI Wallet’s <a href="#notification_en">notification</a> with final invoice status to the merchant’s server before complete the user order. When notifications are not used, you should <a href="#invoice-status">request the invoice status</a>.
</aside>

The URL for redirection supplements <i>order</i> parameter with its value as the invoice ID taken from the <i>transaction</i> parameter of the original Checkout GET-request. Using this parameter, merchant can render the final page depending on the order details.

## Example

1. Merchant redirects to URL: `https://bill.qiwi.com/order/external/main.action?shop=2042&transaction=123123123&successUrl=http%3A%2F%2Fmystore.com%2Fsuccess%3Fa%3D1%26b%3D2&failUrl= http%3A%2F%2Fmystore.com%2Ffail%3Fa%3D1%26b%3D2&iframe=true&target=iframe`

2. User pays the invoice by Visa QIWI Wallet balance on Checkout page and completes payment process.

3. If transaction is successfully created, Checkout page redirects Customer to `http://mystore.com/success?a=1&b=2&order=123123123`.

4. If creation of transaction is unsuccessful, Checkout page redirects Customer to `http://mystore.com/fail?a=1&b=2&order=123123123`.
