# Форма выставления счета {#webform_ru}

###### Последнее обновление: 2017-11-15 | [Редактировать на GitHub](https://github.com/QIWI-API/pull-payments-docs/blob/master/_webform_ru.html.md)

Клиенту отображается платежная форма с выбором способа оплаты выставленного счета.

Вызов веб-формы выполняется без авторизации провайдера. Номер телефона и сумму счета клиент может указать непосредственно на веб-форме.

## Последовательность операций {#webform_flow}

* Пользователь формирует заказ на сайте провайдера.

* Провайдер выполняет вызов веб-формы. При отсутствии номера телефона в параметрах вызова пользователь указывает номер на форме.

* В случае успешного создания счета пользователь автоматически переходит на [платежную форму](#checkout_ru) QIWI Wallet.

* Если провайдер включил отправку [уведомлений на сервер провайдера](#notification_ru), то после проведения платежа система QIWI Wallet высылает уведомление на сервер провайдера об оплате данного счета, либо, если пользователь отклонил счет, о неоплате. Уведомления об оплате счета содержат параметры авторизации, которые необходимо проверять на сервере провайдера.

* После подтверждения оплаты счета провайдер исполняет заказ пользователя.

<h3 class="request method">Запрос → REDIRECT</h3>

<ul class="nestedList url">
    <li><h3>URL <span>https://bill.qiwi.com/order/external/create.action</span></h3></li>
</ul>

~~~http
GET /order/external/create.action?txn_id=10000&from=11223&summ=1.11&successUrl=http%3A%2F%2Fexample.com%3Fcurrency=643 HTTP/1.1
Host: bill.qiwi.com
~~~

<ul class="nestedList params">
    <li><h3>Параметры</h3><span>В ссылке на веб-форму указываются параметры счета.</span></li>
</ul>

Параметр|Описание|Тип|Обяз.
---------|--------|---|----
from | Идентификатор провайдера. Идентификатор указан в настройках HTTP-протокола в личном кабинете провайдера на сайте kassa.qiwi.com|Integer|+
currency | Идентификатор валюты (Alpha-3 ISO 4217 код). Может использоваться любая валюта, предусмотренная договором с КИВИ | String(3)|+
to | Идентификатор номера QIWI Wallet, на который выставляется счет (в международном формате). Если не указан, то пользователю на веб-форме  отображается  поле ввода номера телефона. Счет выставляется только после заполнения номера | String(20)|-
summ | Сумма, на которую выставляется счет. Если параметр не указан, то на веб-форме отображается поле ввода суммы и счет выставляется только после заполнения суммы. | Number(6.2)|-
txn_id|Уникальный идентификатор счета в системе провайдера (например, номер заказа в интернет-магазине). Используется для идентификации конкретного счета. |String(30)|-
comm | Комментарий к счету. Если не указаны данный параметр и параметр `to`, то на веб-форме пользователю отображается поля ввода номера телефона и комментария. Счет выставляется только после заполнения номера| String(255)|-
lifetime | Время жизни счёта. Формат: ГГГГ-ММ-ДДTЧЧММ. По истечении этого времени оплата станет невозможна (счет будет отменен). **Внимание! Если параметр отсутствует, по истечении 28 суток от даты выставления счет автоматически будет отменен.**|Integer|-
successUrl|URL для [переадресации](#back_url) в случае успешного создания транзакции в QIWI Wallet. Ссылка должна вести на сайт провайдера. **Если пользователь выбрал на платежной форме способ оплаты, отличный от оплаты с баланса QIWI Кошелька, то переадресация на сайт провайдера не выполняется.**|URL-закодированная строка|-
failUrl|URL для [переадресации](#back_url) в случае неуспеха при создании транзакции в QIWI Wallet. Ссылка должна вести на сайт провайдера. **Если пользователь выбрал на платежной форме способ оплаты, отличный от оплаты с баланса QIWI Кошелька, то переадресация на сайт провайдера не выполняется.**|URL-закодированная строка|-
pay_source |Способ оплаты по умолчанию, который необходимо отобразить пользователю при открытии платежной формы. Возможные значения:<br>`qw` – оплата с баланса QIWI Кошелька;<br> `mobile` – оплата с баланса мобильного телефона;<br> `card` – оплата банковской картой;<br> `wm` – оплата с привязанного кошелька WebMoney;<br> `ssk` – оплата наличными в терминале QIWI.<br>Если способ оплаты не доступен, пользователю отображается предупреждение, при этом на странице можно выбрать другие способы оплаты. |String|-
